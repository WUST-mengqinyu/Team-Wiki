{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"wiki","title":"wiki"},{"location":"#wiki","text":"","title":"wiki"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/","text":"\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898 \u72b6\u6001\u538b\u7f29dp\u5e38\u7528\u6765\u5904\u7406\u91cf\u7ea7\u5f88\u5c0f\u7684np\u95ee\u9898 \u7531\u6b64\u8fd8\u53ef\u4ee5\u884d\u751f\u51fa\u8f6e\u5ed3\u7ebfdp\u53ca\u5728\u6b64\u4e4b\u4e0a\u7684\u63d2\u5934dp \u72b6\u6001\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u6cd5\u4e2d\u6709\u4e00\u4e9b\u5c0f\u64cd\u4f5c\u60f3\u5206\u4eab\u4e00\u4e0b\uff1a 1\u3001\u679a\u4e3e\u4e8c\u8fdb\u5236\u72b6\u6001\u5b50\u96c6 //for(int i = 0; i != s; i = (i-s)&s) void print(int x) { if (x < 2) printf(\"%d\", x); else { print(x >> 1); print(x % 2); } } int main() { int s = 0B1111; for (int i = 0; i != s; i = (i - s) & s) { print(i); printf(\"\\n\"); } } /*\u8f93\u51fa\u4e3a\uff1a 0 1 10 11 100 101 110 111 1000 1001 1010 1011 1100 1101 1110 */ \u5f88\u65b9\u4fbf\u800c\u4e14\u662f\u5347\u5e8f 2\u3001\u72b6\u6001\u7684\u5404\u79cd\u57fa\u672c\u64cd\u4f5c // \u6240\u6709\u4f4d\u4e3a1 (1<<n)-1 //\u6ce8\u610f\u4f4d\u8fd0\u7b97\u6bd4\u4e00\u6b21\u8fd0\u7b97\u4f18\u5148\u7ea7\u4f4e\u6240\u4ee5\u8981\u52a0\u62ec\u53f7 // \u5224\u65ad\u7b2ci\u4f4d stat & (1<<i) // lowbit\uff0c\u72b6\u6001\u4e2d\u6700\u9760\u8fd1\u672b\u5c3e\u76841 i & -i // \u6c42\u72b6\u6001\u4e2d\u542b\u6709\u7684\u9009\u4e2d\u6570\u91cf\uff0c\u76f8\u5f53\u4e8e\u6c42\u4e8c\u8fdb\u5236\u4f4d\u4e2d1\u7684\u4e2a\u6570 int c = 0; for (int i = 0; i < n; ++i) if (stat & (1<<i)) c++; // \u6216\u8005\u76f4\u63a5\u9884\u5904\u7406\uff0c\u8fd9\u91cc\u7528\u5230\u4e86lowbit for (int i = 0; i < (1<<n); ++i) c[i] = c[i ^ (i & -i)] + 1; // \u679a\u4e3e\u9012\u63a8\u4e0b\u4e00\u4e2a\u72b6\u6001\uff0c\u5176\u5b9e\u968f\u4fbf\u5199\u5c31\u662f\u4e86 for (int i = 0; i < n; ++i) { if ((stat & (1<<i)) == 0) { int newstat = stat | (1<<i); } } 3\u3001\u8f6e\u5ed3\u7ebfdp\u5165\u95e8 \u8bf4\u5230\u8f6e\u5ed3\u7ebfdp\u5c31\u662f\u90a3\u4e2a\u65b9\u683c\u586b\u5145\u95ee\u9898\uff0c\u6c42\u75281*2\u7684\u65b9\u683c\u586b\u6ee1n\u00d7m\u7684\u65b9\u6848\u6570\u3002 \u3010poj 2411\u3011 \u8fd9\u91cc\u662f\u57fa\u7840\u90e8\u5206\uff0c\u4f1a\u7684\u53ef\u4ee5\u8df3\u8fc7 \u8bbe\u8ba1 dp[i][j][k] \u662f\u7b2ci\u884c\u7b2cj\u5217\uff0c\u4e0a\u65b9\u72b6\u6001\u4e3ak\u7684\u65b9\u6848\u6570 \u6700\u540e\u6c42\u89e3\u7684\u662f dp[n][m][(1<<m)-1] 0000xxx xxxx000 \u8fd9\u6837\u4e00\u5f20\u56fe\uff0c\u8868\u793a\u679a\u4e3e\u5230\u4e86\u7b2c2\u884c\u7b2c4\u5217\uff0c\u90a3\u4e48\u5b83\u6240\u9700\u8981\u7684\u72b6\u6001\u4e3a\u6807x\u7684\u4f4d\u7f6e\u662f\u5426\u586b\u5145\uff0c\u5f80\u4e0b\u9012\u63a8\u5c06\u7b2c2\u884c\u7b2c5\u5217\u586b\u5145\u4e00\u4e2a\u7ad6\u7740\u7684\u65b9\u683c\u7684\u8bdd\u5c31\u662f\uff1a cpp int newstat = stat >> 1 | (1 << m - 1) | 1 \u5176\u4e2d stat>>1 \u5c31\u662f\u628a\u72b6\u6001\u53d8\u6210\u4e86 00000xx xxxxx00 \u53bb\u6389\u4e86\u5934\u4f4d\uff0c\u589e\u52a0\u4e86\u4e00\u4f4d\uff0c\u8fd9\u5c31\u662f\u8f6e\u5ed3\u7ebfdp\uff0c\u7c7b\u4f3c\u4e00\u4e2a\u53d6\u7a97\u53e3shift\u7684\u8fc7\u7a0b\u3002\u6807x\u7684\u4f4d\u7f6e\u4e5f\u5c31\u662f\u8f6e\u5ed3\u7ebf\u3002 \u65b9\u683c\u586b\u5145\u95ee\u9898\u7684\u5177\u4f53\u89e3\u7b54\u662f\uff1a 1\u3001\u6bcf\u6b21\u679a\u4e3e\u53ea\u6709\u4e09\u79cd\u60c5\u51b5\uff0c\u4e00\u662f\u6b64\u4f4d\u7f6e\u4e0d\u586b\uff0c\u4e8c\u662f\u6b64\u4f4d\u7f6e\u586b\u7ad6\u7740\u76841\u00d72\u4e5f\u5c31\u662f\u4e0a\u4e00\u884c\u540c\u5217\u548c\u6b64\u4f4d\u7f6e\uff0c\u4e09\u662f\u586b\u6a2a\u7740\u7684\u4e5f\u5c31\u662f\u4e0a\u4e00\u5217\u540c\u884c\u548c\u6b64\u4f4d\u7f6e 2\u3001\u5982\u679c\u8f6e\u5ed3\u7ebf\u4e2d\u4e0a\u4e00\u884c\u540c\u5217\u7684\u4f4d\u7f6e\u4e3a\u7a7a\u5fc5\u987b\u8981\u586b\u4e0a\u4e0d\u7136\u4e4b\u540e\u5c31\u6ca1\u6709\u65b9\u6cd5\u53ef\u4ee5\u5c06\u90a3\u4e2a\u4f4d\u7f6e\u8865\u4e0a\u6240\u4ee5\u662f cpp if ((stat & 2) == 0) { int newstat = stat >> 1 | (1 << m - 1) | 1; dp[i][j][newstat] += dp[i][j - 1][stat];//i,j-1\u770b\u60c5\u51b5\u6539\u52a8\uff0c\u662f\u5b83\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684\u4f4d\u7f6e continue; } \u6ce8\u610f\u6b64\u65f6\u8981\u4e0d\u662f\u7b2c\u4e00\u884c\uff0c\u6839\u636e\u4f60\u4ece1\u8fd8\u662f0\u5f00\u59cb\u8bb0\u5f55\u884c\u6570\u53ef\u80fd\u6709\u8d1f\u4e0b\u6807\u7684\u98ce\u9669\u6240\u4ee5\u5224\u65ad\u4e00\u4e0bi\u662f\u5426\u5927\u4e8e\u5f00\u59cb\u884c\u4e0b\u6807 3\u3001\u5982\u679c\u4e0d\u662f\u4ee5\u4e0a\u60c5\u51b5\u5c31\u53ef\u4ee5\u4e0d\u586b cpp int newstat = stat >> 1; dp[i][j][newstat] += dp[i][j - 1][stat]; 4\u3001\u5982\u679c\u5de6\u8fb9\u4e3a\u7a7a\u53ef\u4ee5\u586b cpp if ((stat & (1<<m - 1)) == 0) { int newstat = stat >> 1 | 3; dp[i][j][newstat] += dp[i][j - 1][stat]; } \u5f53\u7136\u4ee5\u4e0a\u53ea\u662f\u89e3\u91ca\u6027\u7684\u5199\u6cd5\uff0c\u771f\u8981\u505a\u9898\u7684\u8bdd\u663e\u7136\u53ef\u4ee5\u52a0\u4e2a\u6eda\u52a8\u6570\u7ec4\uff0c\u5b83\u6bcf\u4e2a\u70b9\u90fd\u53ea\u4e0e\u4e0a\u4e00\u4e2a\u72b6\u6001\u76f8\u5173\uff0c\u800c\u4e14\u5199\u8d77\u6765\u53cd\u800c\u66f4\u7b80\u5355\u3002 \u6211\u4e60\u60ef\u6765\u8bb2\u662f\u628a\u6700\u8fdc\u4f4d\u770b\u505a0\u4f4d\uff0c\u56e0\u4e3a\u53ef\u4ee5\u53f3\u6ea2 0000xxx xxxx000 \u7b80\u5355\u6765\u8bb2\u6bd4\u5982\u8fd9\u4e2a\u679a\u4e3e\u5230\u4e86\u7b2c2\u884c\u7b2c4\u5217 \u90a3\u4e48\u5b83\u72b6\u6001\u5c31\u8981\u53bb\u8868\u793a\u6807\u201cx\u201d\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u628a\u5b83\u6b63\u4e0a\u65b9\uff08\u4e5f\u5c31\u662f1\uff0c5\uff09\u90a3\u4e2a\u70b9\u770b\u505a\u662f\u72b6\u6001\u7684\u6700\u540e\u4e00\u4f4d\u4e5f\u5c31\u662f0\u4f4d\uff0c\u5728\u5f80\u4e0b\u9012\u63a8\u7684\u8fc7\u7a0b\u4e2d\u5c31\u80fd\u591f int newstat = stat >> 1 | (1<<m-1) \u76f4\u63a5\u5f97\u51fa\u4e0b\u4e00\u7ec4\u72b6\u6001\uff0c\u4e0d\u9700\u8981\u8003\u8651\u6ea2\u51fa\u4f4d \u5982\u679c\u53cd\u7740\u8bbe\u8ba1\u72b6\u538b\u4e5f\u53ef\u4ee5\u4f7f\u7528\u53d6\u6a21\u6765\u51cf\u53bb\u6ea2\u51fa\u4f4d \u4e00\u9053\u9898\uff1acodeforces 903F \u5927\u610f\uff1a\u7ed9\u4e00\u4e2a4\u00d7m\u7684\u77e9\u9635\uff0c\u6709\u4e9b\u4f4d\u7f6e\u4e3ax\uff0c\u9700\u8981\u75281\u00d71\uff0c 2\u00d72\uff0c3\u00d73\uff0c 4\u00d74\u7684\u683c\u5b50\u5c06\u5176\u586b\u5145\u4f7f\u5f97\u6240\u6709x\u4f4d\u7f6e\u90fd\u8981\u88ab\u8986\u76d6\u3002\u6bcf\u79cd\u683c\u5b50\u6709\u4e00\u4e2a\u4ee3\u4ef7\uff0c\u6c42\u6700\u5c0f\u4ee3\u4ef7\u3002 \u663e\u7136\u6b64\u9898\u8f6e\u5ed3\u7ebf\u5927\u5c0f\u4e3a4*4\u4e5f\u5c31\u662f\u524d16\u4e2a\u683c\u5b50\uff0c\u8003\u8651\u4ece\u5de6\u5f80\u53f3\u3001\u4ece\u4e0b\u5f80\u4e0a\u9012\u63a8\u5373\u53ef\u3002 \u552f\u4e00\u4e0d\u597d\u5904\u7406\u7684\u662f\u8fd9\u4e2a\u4ee3\u4ef7\u95ee\u9898\u3002 \u5f3a\u70c8\u63a8\u8350\u8bfb\u4e00\u4e0bdotorya\u7684\u4ee3\u7801\uff0c\u7b80\u76f4\u795e\u4f5c\uff0c\u8bfb\u5230\u5c31\u662f\u8d5a\u5230 // https://codeforces.com/contest/903/submission/33174261 int A[5]; int val[5]; char in[4][1050]; int nxt[65536][120]; int cost[120]; int dp[1050][4096]; int main() { int N, i, j, k, l, m; scanf(\"%d\", &N); for (i = 1; i <= 4; i++) scanf(\"%d\", &A[i]); for (i = 0; i < 4; i++) scanf(\"%s\", in[i]); for (i = 1; i <= 4; i++) { for (j = 0; j < i; j++) for (k = 0; k < i; k++) val[i] |= 1 << (4 * j + k); } int p = 0; for (i = 0; i <= 1; i++) { for (j = 0; j <= 2; j++) { for (k = 0; k <= 3; k++) { for (l = 0; l <= 4; l++) { int totc = A[i] + A[j] + A[k] + A[l]; cost[p] = totc; int v = (val[i] << 3) | (val[j] << 2) | (val[k] << 1) | val[l]; for (m = 0; m < 65536; m++) nxt[m][p] = m & ~v; p++; } } } } memset(dp, 0x3f, sizeof(dp)); int st = 0; for (i = 0; i < 1; i++) { for (j = 0; j < 4; j++) { st = st * 2; if (in[j][i] == '*') st++; } } for (i = 0; i < 120; i++) dp[0][nxt[st][i]] = min(dp[0][nxt[st][i]], cost[i]); for (i = 1; i < N; i++) { int v = 0; for (j = 0; j < 4; j++) v = v * 2 + (int)(in[j][i] == '*'); for (j = 0; j < 4096; j++) { if (dp[i-1][j] > 1000000) continue; l = j * 16 + v; for (k = 0; k < 120; k++) { int x = nxt[l][k]; if (x < 4096) dp[i][x] = min(dp[i][x], dp[i - 1][j] + cost[k]); } } } return !printf(\"%d\\n\", dp[N - 1][0]); } \u9996\u5148 val[1\uff5e4] \u8868\u793a\u4e861\u00d71\u52304\u00d74\u7684\u65b9\u683c\u586b\u5145\u7684\u8f6e\u5ed3\u7ebf\u5f62\u72b6 \u7136\u540e\u9884\u5904\u7406\u4e2d\u7684\u4e00\u4e2a nxt \u6570\u7ec4\u662f\u771f\u7684\u7cbe\u9ad3\uff0c net[m][p] \u8868\u793a\u7684\u662f\u628am\u72b6\u6001\u7ecf\u8fc7p\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u5f0f\u53ef\u4ee5\u8f6c\u79fb\u5230\u7684\u72b6\u6001\uff0cp\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u5f0f\u7684\u4ee3\u4ef7\u4e3a$cost[p]$\uff0c\u7531\u4e8e\u72b6\u538bdp\u8fd9\u79cd\u4e1c\u897f\u771f\u7684\u662f\u4e0d\u80fd\u8868\u793a\u5f88\u591a\u72b6\u6001\uff0c\u9898\u76ee\u7684\u6570\u636e\u8303\u56f4\u4e5f\u4f1a\u5f88\u5c0f\uff0c\u8fd9\u6837\u7684\u9884\u5904\u7406\u4e0d\u4ec5\u53ef\u4ee5\u5f88\u597d\u7684\u63d0\u9ad8\u4ee3\u7801\u8fd0\u884c\u6548\u7387\u8fd8\u53ef\u4ee5\u51cf\u4f4e\u6211\u4eec\u7684\u7f16\u5199\u96be\u5ea6\u3002 \u6ce8\u610f\u4ed6\u8fd9\u91cc\u8f6c\u79fb\u65b9\u5f0f\u7684\u603b\u6570\u7684\u95ee\u9898\uff0c\u5176\u5b9e\u6211\u4eec\u8bf416\u4e2a\u683c\u5b50\u75281~4\u7684\u65b9\u683c\u586b\u6ee1\u6700\u591a\u751a\u81f3\u9700\u898116\u4e2a1*1\uff0c\u4f46\u662f4\u4e2a1\u00d7 1\u5fc5\u7136\u662f\u53ea\u4e0e\u524d\u4e00\u5217\u76f8\u5173\u8054\uff0c\u6240\u4ee5\u6700\u591a4\u4e2a\u5c31\u53ef\u4ee5\u89e3\u51b3\u6240\u6709\u95ee\u9898p\u7684\u72b6\u6001\u6570\u5c31\u662f$1\u00d72\u00d73\u00d74=24$\u79cd\uff0c\u867d\u7136\u4e0d\u660e\u767d\u4ed6\u4e3a\u4f55\u8981\u5199\u6210120\u79cd\u4f46\u662f\u8fd9\u4e2anxt\u6570\u7ec4\u7684\u4f18\u8d8a\u6027\u5c31\u4f53\u73b0\u51fa\u6765\u4e86\uff0c\u5c31\u7b97\u540e\u9762\u7684p\u4e0d\u505a\u5904\u7406\uff0c\u5b83\u4ecd\u7136\u662f\u6b63\u786e\u7684\uff0c\u56e0\u4e3anxt\u6570\u7ec4\u9ed8\u8ba4\u6307\u54110\uff0c\u518d\u600e\u4e48\u778e\u5f04\u5b83\u6700\u7ec80\u65e2\u4e0d\u662f\u7b54\u6848\uff0c\u4e5f\u4e0d\u80fd\u6539\u53d8\u4e2d\u95f4\u72b6\u6001\uff0c\u540c\u65f6\u4ee3\u4ef7\u4e5f\u662f0\u3002 \u7136\u540e\u53ef\u4ee5\u8bf4\u540e\u9762\u968f\u4fbf\u8bbe\u8ba1\u8f6e\u5ed3\u7ebf\u90fd\u662f\u53ef\u4ee5\u5199\u7684\u4e86\uff0c\u4e0d\u8fc7\u591a\u8d58\u8ff0\u3002 4\u3001\u63d2\u5934dp \u7b49\u54ea\u5929\u4f1a\u624b\u6495\u4e86\u518d\u5199 \u5927\u6982\u6b65\u9aa4\u662f\uff1a\u8bbe\u8ba1\u8f6e\u5ed3\u7ebf->\u8bbe\u8ba1\u63d2\u5934\u7f16\u7801->\u8003\u8651hashmap\u7684\u5b58\u50a8->\u8bbe\u8ba1\u72b6\u6001\u8f6c\u79fb->\u5f00\u59cb\u4e0a\u624b \u8fd9\u4e2a\u7b97\u6cd5\u8ba9\u6211\u89c9\u5f97\u5728\u505a\u7a0b\u5e8f\u8bbe\u8ba1\u800c\u4e0d\u662f\u7b97\u6cd5\u8bbe\u8ba1\u3002 5\u3001\u72b6\u538bdp\u5176\u4ed6\u7ec6\u8282 \u987a\u5e8f\u95ee\u9898\uff1a \u4f8b\u9898\uff1ahttps://www.cometoj.com/contest/52/problem/C \u5f88\u7cbe\u9ad3\u7684\u4e00\u9898\uff0c\u6c42\u89e3\u6240\u6709\u5408\u6cd5\u6392\u5217\u7684\u9006\u5e8f\u5bf9 \u2223i\u2212j\u2223 \u00d7 \u2223pos_j\u2212pos_i\u2223 \u7684\u6743\u503c\u548c \u672c\u6765\u72b6\u538b\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\u76f8\u5f53\u56f0\u96be\uff0c\u56e0\u4e3a\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u5e26\u987a\u5e8f\u7684\u9009\u62e9\u95ee\u9898\uff0c\u4e00\u822c\u6765\u8bb2\u66b4\u529b\u662f\u9636\u4e58\u7ea7\u522b\u7684\u7b97\u6cd5\uff0c\u4f46\u662f\u8fd9\u79cd\u95ee\u9898\u5c31\u548c\u72b6\u538bdp\u89e3\u51b3\u65c5\u884c\u5546\u95ee\u9898\u4e00\u6837\uff0c\u5c06\u9636\u4e58\u590d\u6742\u5ea6\u964d\u4f4e\u5230\u6307\u6570\u7ea7\u3002 \u5176\u5b9e\u53ef\u4ee5\u5bf9\u5df2\u9009\u62e9\u7684\u4f4d\u7f6e\u8fdb\u884c\u72b6\u538b\uff0c\u7136\u540e\u6dfb\u52a0\u5e8f\u5217\u5c31\u662f\u4ece\u5c0f\u5230\u5927\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e0d\u5fc5\u8003\u8651\u987a\u5e8f\u3002 \u7528\u4e00\u4e2a dp[1<<maxn] \u8868\u793a\u67d0\u79cd\u9009\u62e9\u4e0b\u7684\u6743\u503c\u8d21\u732e \u8fd9\u6837\u964d\u4f4e\u590d\u6742\u5ea6\u7684\u539f\u56e0\u662f\u5176\u5b9e\u5b83\u72b6\u6001\u4e2d1\u7684\u4e2a\u6570\u5c31\u662f\u5f53\u524d\u53d6\u7684\u6570\u7684\u5927\u5c0f-1\u3002 \u8003\u8651\u8f6c\u79fb\u65b9\u4e58\uff1a dp[s] = \\sum (dp[s'] + \\sum_{x=s \\bigoplus s'+1}^n(pre - t)*(x - s\\bigoplus s')) \u5176\u4e2ds'\u8868\u793as\u7684\u5b50\u96c6\uff0ct\u8868\u793as'\u4e2d1\u7684\u4e2a\u6570\uff08\u5373\u5f53\u524d\u53d6\u7684\u6570-1\uff09\uff0cpre\u8868\u793a\u6bd4t\u5c0f\u7684\u67d0\u4e2a\u6570 \u770b\u4f3c\u4e0d\u53ef\u89e3\uff0c\u5176\u5b9e\u7531\u4e8e\u786e\u5b9a\u4e86\u4ece\u5c0f\u5230\u5927\u653e\u6570\u7684\u987a\u5e8f\uff0c\u5b83\u771f\u6b63\u6bcf\u79cd\u60c5\u51b5\u7684\u987a\u5e8f\u53cd\u800c\u53d8\u5f97\u4e0d\u90a3\u4e48\u91cd\u8981\u4e86\u3002 \u8bb0\u5f55 g[1<<maxn] \u8868\u793a\u67d0\u79cd\u72b6\u6001\u7684\u53ef\u80fd\u6392\u5217\u4e2a\u6570 t[1<<maxn][maxn] \u8868\u793a\u67d0\u79cd\u72b6\u6001\u4e0b\u67d0\u4f4d\u7f6e\u4e0a\u6240\u6709\u6392\u5217\u53ef\u80fd\u6027\u7684\u503c\u7684\u548c\u3002 \u7531\u4e8e\u4e0b\u4e00\u79cd\u72b6\u6001\u7684\u6570\u6bd4\u5df2\u6dfb\u52a0\u7684\u6570\u90fd\u5927\uff0c\u6240\u4ee5\u53ea\u8981\u662f\u5305\u542b\u5728\u503c\u5185\u4e14\u5728\u5f53\u524d\u4f4d\u7f6e\u540e\u9762\u7684\u6570\u90fd\u662f\u9006\u5e8f\u5bf9\u3002 \u8f6c\u79fb\u5c31\u53d8\u7b80\u5355\u4e86 \u8bbes\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e2d1\u7684\u4e2a\u6570\u4e3ay\uff0c\u679a\u4e3e\u5230\u7684\u4f4d\u7f6e\uff08 s\\bigoplus s' \uff09\u4e3ax \u5219\u6709 \\begin{cases} dp[s] = \\sum_{s'} (dp[s'] + \\sum_{z>x\uff0cz\\in s'} (z - x)*(g[s]*y - t[s][z])) \\\\ t[s][i] = \\sum_{s'}(t[s][i]) & \\text{i != x} \\\\ t[s][x] = \\sum_{s'}(g[s]*y + t[s][x]) \\\\ g[s] = \\sum_{s'}g[s'] \\end{cases} \u770b\u7684\u6709\u70b9\u4e91\u91cc\u96fe\u91cc\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u628a\u6240\u6709\u5b50\u96c6\u7684\u60c5\u51b5\u90fd\u7d2f\u52a0\u5230\u4e00\u8d77\uff0ct\u6570\u7ec4\u5c31\u662f\u7528\u6765\u50a8\u5b58\u6bcf\u4f4d\u4e0a\u5b50\u96c6\u6240\u6709\u60c5\u51b5\u7684\u6570\u5b57\u548c\u3002\u7136\u540e\u6bcf\u6b21\u628a\u5b83\u540e\u9762\u7684\u548c\u52a0\u5230dp\u6570\u7ec4\u5373\u53ef \u7ef4\u62a4g\u6570\u7ec4\u662f\u4e3a\u4e86\u66f4\u65b0t\u6570\u7ec4\uff0c\u6240\u4ee5\u6574\u4e2a\u4e00\u6765\u53ef\u4ee5\u770b\u51fa\u4e00\u4e2a\u5957\u8def\uff1a \u5bf9\u4e00\u4e2a\u5e26\u987a\u5e8f\u548c\u6743\u503c\u7684\u72b6\u538bdp\uff0c\u5f80\u5f80\u9700\u8981\u7ef4\u62a4\u4e09\u4e2a\u6743\u503c\uff1a\u72b6\u6001\u7684\u53ef\u80fd\u6027\u4e2a\u6570\u3001\u72b6\u6001\u4e0a\u6bcf\u4e00\u4f4d\u7684\u6743\u503c\u548c\u3001\u72b6\u6001\u672c\u8eab\u4ee3\u8868\u7684\u586b\u5145\u65b9\u5f0f\u3002 6\u3001\u5206\u8fa8\u72b6\u538bdp\u548c\u8d39\u7528\u6d41 \u4f17\u6240\u5468\u77e5\u8d39\u7528\u6d41\u548c\u72b6\u538bdp\u90fd\u662f\u7528\u6765\u89e3\u51b3\u5c0f\u8303\u56f4\u6570\u636e\u7684np\u95ee\u9898\u7684\u3002\u90a3\u4e48\u5f53\u62ff\u5230\u4e00\u4e2a\u9898\u770b\u7684\u6570\u636e\u8303\u56f420\u751a\u81f310\u4ee5\u5185\u600e\u6837\u5206\u8fa8\u4e5f\u662f\u4e00\u4e2a\u95ee\u9898\u3002 \u72b6\u538bdp\u6709\u4e2a\u5f88\u91cd\u8981\u7684\u7279\u70b9\u5c31\u662f\uff1a\u53d6\u8fd8\u662f\u4e0d\u53d6\uff0c\u80fd\u4e0d\u80fd\u53d6\u3002 \u8d39\u7528\u6d41\u6709\u4e2a\u5f88\u91cd\u8981\u7684\u7279\u70b9\uff1a\u4e00\u822c\u4e0d\u7528\u6765\u89e3\u51b3\u7ebf\u6027\u95ee\u9898\u3002 \u90a3\u4e48\u9996\u5148\u5e94\u8be5\u770b\u662f\u5426\u662f\u7ebf\u6027\u6216\u987a\u5e8f\u65e0\u5173\u7684\u95ee\u9898\uff0c\u5982\u679c\u662f\u5b9a\u662f\u72b6\u538bdp\uff0c\u5426\u5219\u770b\u662f\u5426\u7b26\u5408\u53d6\u4e0d\u53d6\u768401\u89c4\u5219\uff0c\u5982\u679c\u662f\u5b9a\u662f\u72b6\u538bdp\uff0c\u5426\u5219\u72b6\u538b\u57fa\u672c\u65e0\u6cd5\u89e3\u51b3\uff0c\u8003\u8651\u8d39\u7528\u6d41\u548c\u7206\u641c\u3002","title":"\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#dp","text":"\u72b6\u6001\u538b\u7f29dp\u5e38\u7528\u6765\u5904\u7406\u91cf\u7ea7\u5f88\u5c0f\u7684np\u95ee\u9898 \u7531\u6b64\u8fd8\u53ef\u4ee5\u884d\u751f\u51fa\u8f6e\u5ed3\u7ebfdp\u53ca\u5728\u6b64\u4e4b\u4e0a\u7684\u63d2\u5934dp \u72b6\u6001\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u6cd5\u4e2d\u6709\u4e00\u4e9b\u5c0f\u64cd\u4f5c\u60f3\u5206\u4eab\u4e00\u4e0b\uff1a","title":"\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#1","text":"//for(int i = 0; i != s; i = (i-s)&s) void print(int x) { if (x < 2) printf(\"%d\", x); else { print(x >> 1); print(x % 2); } } int main() { int s = 0B1111; for (int i = 0; i != s; i = (i - s) & s) { print(i); printf(\"\\n\"); } } /*\u8f93\u51fa\u4e3a\uff1a 0 1 10 11 100 101 110 111 1000 1001 1010 1011 1100 1101 1110 */ \u5f88\u65b9\u4fbf\u800c\u4e14\u662f\u5347\u5e8f","title":"1\u3001\u679a\u4e3e\u4e8c\u8fdb\u5236\u72b6\u6001\u5b50\u96c6"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#2","text":"// \u6240\u6709\u4f4d\u4e3a1 (1<<n)-1 //\u6ce8\u610f\u4f4d\u8fd0\u7b97\u6bd4\u4e00\u6b21\u8fd0\u7b97\u4f18\u5148\u7ea7\u4f4e\u6240\u4ee5\u8981\u52a0\u62ec\u53f7 // \u5224\u65ad\u7b2ci\u4f4d stat & (1<<i) // lowbit\uff0c\u72b6\u6001\u4e2d\u6700\u9760\u8fd1\u672b\u5c3e\u76841 i & -i // \u6c42\u72b6\u6001\u4e2d\u542b\u6709\u7684\u9009\u4e2d\u6570\u91cf\uff0c\u76f8\u5f53\u4e8e\u6c42\u4e8c\u8fdb\u5236\u4f4d\u4e2d1\u7684\u4e2a\u6570 int c = 0; for (int i = 0; i < n; ++i) if (stat & (1<<i)) c++; // \u6216\u8005\u76f4\u63a5\u9884\u5904\u7406\uff0c\u8fd9\u91cc\u7528\u5230\u4e86lowbit for (int i = 0; i < (1<<n); ++i) c[i] = c[i ^ (i & -i)] + 1; // \u679a\u4e3e\u9012\u63a8\u4e0b\u4e00\u4e2a\u72b6\u6001\uff0c\u5176\u5b9e\u968f\u4fbf\u5199\u5c31\u662f\u4e86 for (int i = 0; i < n; ++i) { if ((stat & (1<<i)) == 0) { int newstat = stat | (1<<i); } }","title":"2\u3001\u72b6\u6001\u7684\u5404\u79cd\u57fa\u672c\u64cd\u4f5c"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#3dp","text":"\u8bf4\u5230\u8f6e\u5ed3\u7ebfdp\u5c31\u662f\u90a3\u4e2a\u65b9\u683c\u586b\u5145\u95ee\u9898\uff0c\u6c42\u75281*2\u7684\u65b9\u683c\u586b\u6ee1n\u00d7m\u7684\u65b9\u6848\u6570\u3002 \u3010poj 2411\u3011 \u8fd9\u91cc\u662f\u57fa\u7840\u90e8\u5206\uff0c\u4f1a\u7684\u53ef\u4ee5\u8df3\u8fc7 \u8bbe\u8ba1 dp[i][j][k] \u662f\u7b2ci\u884c\u7b2cj\u5217\uff0c\u4e0a\u65b9\u72b6\u6001\u4e3ak\u7684\u65b9\u6848\u6570 \u6700\u540e\u6c42\u89e3\u7684\u662f dp[n][m][(1<<m)-1] 0000xxx xxxx000 \u8fd9\u6837\u4e00\u5f20\u56fe\uff0c\u8868\u793a\u679a\u4e3e\u5230\u4e86\u7b2c2\u884c\u7b2c4\u5217\uff0c\u90a3\u4e48\u5b83\u6240\u9700\u8981\u7684\u72b6\u6001\u4e3a\u6807x\u7684\u4f4d\u7f6e\u662f\u5426\u586b\u5145\uff0c\u5f80\u4e0b\u9012\u63a8\u5c06\u7b2c2\u884c\u7b2c5\u5217\u586b\u5145\u4e00\u4e2a\u7ad6\u7740\u7684\u65b9\u683c\u7684\u8bdd\u5c31\u662f\uff1a cpp int newstat = stat >> 1 | (1 << m - 1) | 1 \u5176\u4e2d stat>>1 \u5c31\u662f\u628a\u72b6\u6001\u53d8\u6210\u4e86 00000xx xxxxx00 \u53bb\u6389\u4e86\u5934\u4f4d\uff0c\u589e\u52a0\u4e86\u4e00\u4f4d\uff0c\u8fd9\u5c31\u662f\u8f6e\u5ed3\u7ebfdp\uff0c\u7c7b\u4f3c\u4e00\u4e2a\u53d6\u7a97\u53e3shift\u7684\u8fc7\u7a0b\u3002\u6807x\u7684\u4f4d\u7f6e\u4e5f\u5c31\u662f\u8f6e\u5ed3\u7ebf\u3002 \u65b9\u683c\u586b\u5145\u95ee\u9898\u7684\u5177\u4f53\u89e3\u7b54\u662f\uff1a 1\u3001\u6bcf\u6b21\u679a\u4e3e\u53ea\u6709\u4e09\u79cd\u60c5\u51b5\uff0c\u4e00\u662f\u6b64\u4f4d\u7f6e\u4e0d\u586b\uff0c\u4e8c\u662f\u6b64\u4f4d\u7f6e\u586b\u7ad6\u7740\u76841\u00d72\u4e5f\u5c31\u662f\u4e0a\u4e00\u884c\u540c\u5217\u548c\u6b64\u4f4d\u7f6e\uff0c\u4e09\u662f\u586b\u6a2a\u7740\u7684\u4e5f\u5c31\u662f\u4e0a\u4e00\u5217\u540c\u884c\u548c\u6b64\u4f4d\u7f6e 2\u3001\u5982\u679c\u8f6e\u5ed3\u7ebf\u4e2d\u4e0a\u4e00\u884c\u540c\u5217\u7684\u4f4d\u7f6e\u4e3a\u7a7a\u5fc5\u987b\u8981\u586b\u4e0a\u4e0d\u7136\u4e4b\u540e\u5c31\u6ca1\u6709\u65b9\u6cd5\u53ef\u4ee5\u5c06\u90a3\u4e2a\u4f4d\u7f6e\u8865\u4e0a\u6240\u4ee5\u662f cpp if ((stat & 2) == 0) { int newstat = stat >> 1 | (1 << m - 1) | 1; dp[i][j][newstat] += dp[i][j - 1][stat];//i,j-1\u770b\u60c5\u51b5\u6539\u52a8\uff0c\u662f\u5b83\u4e0a\u4e00\u4e2a\u72b6\u6001\u7684\u4f4d\u7f6e continue; } \u6ce8\u610f\u6b64\u65f6\u8981\u4e0d\u662f\u7b2c\u4e00\u884c\uff0c\u6839\u636e\u4f60\u4ece1\u8fd8\u662f0\u5f00\u59cb\u8bb0\u5f55\u884c\u6570\u53ef\u80fd\u6709\u8d1f\u4e0b\u6807\u7684\u98ce\u9669\u6240\u4ee5\u5224\u65ad\u4e00\u4e0bi\u662f\u5426\u5927\u4e8e\u5f00\u59cb\u884c\u4e0b\u6807 3\u3001\u5982\u679c\u4e0d\u662f\u4ee5\u4e0a\u60c5\u51b5\u5c31\u53ef\u4ee5\u4e0d\u586b cpp int newstat = stat >> 1; dp[i][j][newstat] += dp[i][j - 1][stat]; 4\u3001\u5982\u679c\u5de6\u8fb9\u4e3a\u7a7a\u53ef\u4ee5\u586b cpp if ((stat & (1<<m - 1)) == 0) { int newstat = stat >> 1 | 3; dp[i][j][newstat] += dp[i][j - 1][stat]; } \u5f53\u7136\u4ee5\u4e0a\u53ea\u662f\u89e3\u91ca\u6027\u7684\u5199\u6cd5\uff0c\u771f\u8981\u505a\u9898\u7684\u8bdd\u663e\u7136\u53ef\u4ee5\u52a0\u4e2a\u6eda\u52a8\u6570\u7ec4\uff0c\u5b83\u6bcf\u4e2a\u70b9\u90fd\u53ea\u4e0e\u4e0a\u4e00\u4e2a\u72b6\u6001\u76f8\u5173\uff0c\u800c\u4e14\u5199\u8d77\u6765\u53cd\u800c\u66f4\u7b80\u5355\u3002 \u6211\u4e60\u60ef\u6765\u8bb2\u662f\u628a\u6700\u8fdc\u4f4d\u770b\u505a0\u4f4d\uff0c\u56e0\u4e3a\u53ef\u4ee5\u53f3\u6ea2 0000xxx xxxx000 \u7b80\u5355\u6765\u8bb2\u6bd4\u5982\u8fd9\u4e2a\u679a\u4e3e\u5230\u4e86\u7b2c2\u884c\u7b2c4\u5217 \u90a3\u4e48\u5b83\u72b6\u6001\u5c31\u8981\u53bb\u8868\u793a\u6807\u201cx\u201d\u7684\u4f4d\u7f6e\uff0c\u5982\u679c\u628a\u5b83\u6b63\u4e0a\u65b9\uff08\u4e5f\u5c31\u662f1\uff0c5\uff09\u90a3\u4e2a\u70b9\u770b\u505a\u662f\u72b6\u6001\u7684\u6700\u540e\u4e00\u4f4d\u4e5f\u5c31\u662f0\u4f4d\uff0c\u5728\u5f80\u4e0b\u9012\u63a8\u7684\u8fc7\u7a0b\u4e2d\u5c31\u80fd\u591f int newstat = stat >> 1 | (1<<m-1) \u76f4\u63a5\u5f97\u51fa\u4e0b\u4e00\u7ec4\u72b6\u6001\uff0c\u4e0d\u9700\u8981\u8003\u8651\u6ea2\u51fa\u4f4d \u5982\u679c\u53cd\u7740\u8bbe\u8ba1\u72b6\u538b\u4e5f\u53ef\u4ee5\u4f7f\u7528\u53d6\u6a21\u6765\u51cf\u53bb\u6ea2\u51fa\u4f4d \u4e00\u9053\u9898\uff1acodeforces 903F \u5927\u610f\uff1a\u7ed9\u4e00\u4e2a4\u00d7m\u7684\u77e9\u9635\uff0c\u6709\u4e9b\u4f4d\u7f6e\u4e3ax\uff0c\u9700\u8981\u75281\u00d71\uff0c 2\u00d72\uff0c3\u00d73\uff0c 4\u00d74\u7684\u683c\u5b50\u5c06\u5176\u586b\u5145\u4f7f\u5f97\u6240\u6709x\u4f4d\u7f6e\u90fd\u8981\u88ab\u8986\u76d6\u3002\u6bcf\u79cd\u683c\u5b50\u6709\u4e00\u4e2a\u4ee3\u4ef7\uff0c\u6c42\u6700\u5c0f\u4ee3\u4ef7\u3002 \u663e\u7136\u6b64\u9898\u8f6e\u5ed3\u7ebf\u5927\u5c0f\u4e3a4*4\u4e5f\u5c31\u662f\u524d16\u4e2a\u683c\u5b50\uff0c\u8003\u8651\u4ece\u5de6\u5f80\u53f3\u3001\u4ece\u4e0b\u5f80\u4e0a\u9012\u63a8\u5373\u53ef\u3002 \u552f\u4e00\u4e0d\u597d\u5904\u7406\u7684\u662f\u8fd9\u4e2a\u4ee3\u4ef7\u95ee\u9898\u3002 \u5f3a\u70c8\u63a8\u8350\u8bfb\u4e00\u4e0bdotorya\u7684\u4ee3\u7801\uff0c\u7b80\u76f4\u795e\u4f5c\uff0c\u8bfb\u5230\u5c31\u662f\u8d5a\u5230 // https://codeforces.com/contest/903/submission/33174261 int A[5]; int val[5]; char in[4][1050]; int nxt[65536][120]; int cost[120]; int dp[1050][4096]; int main() { int N, i, j, k, l, m; scanf(\"%d\", &N); for (i = 1; i <= 4; i++) scanf(\"%d\", &A[i]); for (i = 0; i < 4; i++) scanf(\"%s\", in[i]); for (i = 1; i <= 4; i++) { for (j = 0; j < i; j++) for (k = 0; k < i; k++) val[i] |= 1 << (4 * j + k); } int p = 0; for (i = 0; i <= 1; i++) { for (j = 0; j <= 2; j++) { for (k = 0; k <= 3; k++) { for (l = 0; l <= 4; l++) { int totc = A[i] + A[j] + A[k] + A[l]; cost[p] = totc; int v = (val[i] << 3) | (val[j] << 2) | (val[k] << 1) | val[l]; for (m = 0; m < 65536; m++) nxt[m][p] = m & ~v; p++; } } } } memset(dp, 0x3f, sizeof(dp)); int st = 0; for (i = 0; i < 1; i++) { for (j = 0; j < 4; j++) { st = st * 2; if (in[j][i] == '*') st++; } } for (i = 0; i < 120; i++) dp[0][nxt[st][i]] = min(dp[0][nxt[st][i]], cost[i]); for (i = 1; i < N; i++) { int v = 0; for (j = 0; j < 4; j++) v = v * 2 + (int)(in[j][i] == '*'); for (j = 0; j < 4096; j++) { if (dp[i-1][j] > 1000000) continue; l = j * 16 + v; for (k = 0; k < 120; k++) { int x = nxt[l][k]; if (x < 4096) dp[i][x] = min(dp[i][x], dp[i - 1][j] + cost[k]); } } } return !printf(\"%d\\n\", dp[N - 1][0]); } \u9996\u5148 val[1\uff5e4] \u8868\u793a\u4e861\u00d71\u52304\u00d74\u7684\u65b9\u683c\u586b\u5145\u7684\u8f6e\u5ed3\u7ebf\u5f62\u72b6 \u7136\u540e\u9884\u5904\u7406\u4e2d\u7684\u4e00\u4e2a nxt \u6570\u7ec4\u662f\u771f\u7684\u7cbe\u9ad3\uff0c net[m][p] \u8868\u793a\u7684\u662f\u628am\u72b6\u6001\u7ecf\u8fc7p\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u5f0f\u53ef\u4ee5\u8f6c\u79fb\u5230\u7684\u72b6\u6001\uff0cp\u8fd9\u4e2a\u8f6c\u79fb\u65b9\u5f0f\u7684\u4ee3\u4ef7\u4e3a$cost[p]$\uff0c\u7531\u4e8e\u72b6\u538bdp\u8fd9\u79cd\u4e1c\u897f\u771f\u7684\u662f\u4e0d\u80fd\u8868\u793a\u5f88\u591a\u72b6\u6001\uff0c\u9898\u76ee\u7684\u6570\u636e\u8303\u56f4\u4e5f\u4f1a\u5f88\u5c0f\uff0c\u8fd9\u6837\u7684\u9884\u5904\u7406\u4e0d\u4ec5\u53ef\u4ee5\u5f88\u597d\u7684\u63d0\u9ad8\u4ee3\u7801\u8fd0\u884c\u6548\u7387\u8fd8\u53ef\u4ee5\u51cf\u4f4e\u6211\u4eec\u7684\u7f16\u5199\u96be\u5ea6\u3002 \u6ce8\u610f\u4ed6\u8fd9\u91cc\u8f6c\u79fb\u65b9\u5f0f\u7684\u603b\u6570\u7684\u95ee\u9898\uff0c\u5176\u5b9e\u6211\u4eec\u8bf416\u4e2a\u683c\u5b50\u75281~4\u7684\u65b9\u683c\u586b\u6ee1\u6700\u591a\u751a\u81f3\u9700\u898116\u4e2a1*1\uff0c\u4f46\u662f4\u4e2a1\u00d7 1\u5fc5\u7136\u662f\u53ea\u4e0e\u524d\u4e00\u5217\u76f8\u5173\u8054\uff0c\u6240\u4ee5\u6700\u591a4\u4e2a\u5c31\u53ef\u4ee5\u89e3\u51b3\u6240\u6709\u95ee\u9898p\u7684\u72b6\u6001\u6570\u5c31\u662f$1\u00d72\u00d73\u00d74=24$\u79cd\uff0c\u867d\u7136\u4e0d\u660e\u767d\u4ed6\u4e3a\u4f55\u8981\u5199\u6210120\u79cd\u4f46\u662f\u8fd9\u4e2anxt\u6570\u7ec4\u7684\u4f18\u8d8a\u6027\u5c31\u4f53\u73b0\u51fa\u6765\u4e86\uff0c\u5c31\u7b97\u540e\u9762\u7684p\u4e0d\u505a\u5904\u7406\uff0c\u5b83\u4ecd\u7136\u662f\u6b63\u786e\u7684\uff0c\u56e0\u4e3anxt\u6570\u7ec4\u9ed8\u8ba4\u6307\u54110\uff0c\u518d\u600e\u4e48\u778e\u5f04\u5b83\u6700\u7ec80\u65e2\u4e0d\u662f\u7b54\u6848\uff0c\u4e5f\u4e0d\u80fd\u6539\u53d8\u4e2d\u95f4\u72b6\u6001\uff0c\u540c\u65f6\u4ee3\u4ef7\u4e5f\u662f0\u3002 \u7136\u540e\u53ef\u4ee5\u8bf4\u540e\u9762\u968f\u4fbf\u8bbe\u8ba1\u8f6e\u5ed3\u7ebf\u90fd\u662f\u53ef\u4ee5\u5199\u7684\u4e86\uff0c\u4e0d\u8fc7\u591a\u8d58\u8ff0\u3002","title":"3\u3001\u8f6e\u5ed3\u7ebfdp\u5165\u95e8"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#4dp","text":"\u7b49\u54ea\u5929\u4f1a\u624b\u6495\u4e86\u518d\u5199 \u5927\u6982\u6b65\u9aa4\u662f\uff1a\u8bbe\u8ba1\u8f6e\u5ed3\u7ebf->\u8bbe\u8ba1\u63d2\u5934\u7f16\u7801->\u8003\u8651hashmap\u7684\u5b58\u50a8->\u8bbe\u8ba1\u72b6\u6001\u8f6c\u79fb->\u5f00\u59cb\u4e0a\u624b \u8fd9\u4e2a\u7b97\u6cd5\u8ba9\u6211\u89c9\u5f97\u5728\u505a\u7a0b\u5e8f\u8bbe\u8ba1\u800c\u4e0d\u662f\u7b97\u6cd5\u8bbe\u8ba1\u3002","title":"4\u3001\u63d2\u5934dp"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#5dp","text":"\u987a\u5e8f\u95ee\u9898\uff1a \u4f8b\u9898\uff1ahttps://www.cometoj.com/contest/52/problem/C \u5f88\u7cbe\u9ad3\u7684\u4e00\u9898\uff0c\u6c42\u89e3\u6240\u6709\u5408\u6cd5\u6392\u5217\u7684\u9006\u5e8f\u5bf9 \u2223i\u2212j\u2223 \u00d7 \u2223pos_j\u2212pos_i\u2223 \u7684\u6743\u503c\u548c \u672c\u6765\u72b6\u538b\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\u76f8\u5f53\u56f0\u96be\uff0c\u56e0\u4e3a\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u5e26\u987a\u5e8f\u7684\u9009\u62e9\u95ee\u9898\uff0c\u4e00\u822c\u6765\u8bb2\u66b4\u529b\u662f\u9636\u4e58\u7ea7\u522b\u7684\u7b97\u6cd5\uff0c\u4f46\u662f\u8fd9\u79cd\u95ee\u9898\u5c31\u548c\u72b6\u538bdp\u89e3\u51b3\u65c5\u884c\u5546\u95ee\u9898\u4e00\u6837\uff0c\u5c06\u9636\u4e58\u590d\u6742\u5ea6\u964d\u4f4e\u5230\u6307\u6570\u7ea7\u3002 \u5176\u5b9e\u53ef\u4ee5\u5bf9\u5df2\u9009\u62e9\u7684\u4f4d\u7f6e\u8fdb\u884c\u72b6\u538b\uff0c\u7136\u540e\u6dfb\u52a0\u5e8f\u5217\u5c31\u662f\u4ece\u5c0f\u5230\u5927\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e0d\u5fc5\u8003\u8651\u987a\u5e8f\u3002 \u7528\u4e00\u4e2a dp[1<<maxn] \u8868\u793a\u67d0\u79cd\u9009\u62e9\u4e0b\u7684\u6743\u503c\u8d21\u732e \u8fd9\u6837\u964d\u4f4e\u590d\u6742\u5ea6\u7684\u539f\u56e0\u662f\u5176\u5b9e\u5b83\u72b6\u6001\u4e2d1\u7684\u4e2a\u6570\u5c31\u662f\u5f53\u524d\u53d6\u7684\u6570\u7684\u5927\u5c0f-1\u3002 \u8003\u8651\u8f6c\u79fb\u65b9\u4e58\uff1a dp[s] = \\sum (dp[s'] + \\sum_{x=s \\bigoplus s'+1}^n(pre - t)*(x - s\\bigoplus s')) \u5176\u4e2ds'\u8868\u793as\u7684\u5b50\u96c6\uff0ct\u8868\u793as'\u4e2d1\u7684\u4e2a\u6570\uff08\u5373\u5f53\u524d\u53d6\u7684\u6570-1\uff09\uff0cpre\u8868\u793a\u6bd4t\u5c0f\u7684\u67d0\u4e2a\u6570 \u770b\u4f3c\u4e0d\u53ef\u89e3\uff0c\u5176\u5b9e\u7531\u4e8e\u786e\u5b9a\u4e86\u4ece\u5c0f\u5230\u5927\u653e\u6570\u7684\u987a\u5e8f\uff0c\u5b83\u771f\u6b63\u6bcf\u79cd\u60c5\u51b5\u7684\u987a\u5e8f\u53cd\u800c\u53d8\u5f97\u4e0d\u90a3\u4e48\u91cd\u8981\u4e86\u3002 \u8bb0\u5f55 g[1<<maxn] \u8868\u793a\u67d0\u79cd\u72b6\u6001\u7684\u53ef\u80fd\u6392\u5217\u4e2a\u6570 t[1<<maxn][maxn] \u8868\u793a\u67d0\u79cd\u72b6\u6001\u4e0b\u67d0\u4f4d\u7f6e\u4e0a\u6240\u6709\u6392\u5217\u53ef\u80fd\u6027\u7684\u503c\u7684\u548c\u3002 \u7531\u4e8e\u4e0b\u4e00\u79cd\u72b6\u6001\u7684\u6570\u6bd4\u5df2\u6dfb\u52a0\u7684\u6570\u90fd\u5927\uff0c\u6240\u4ee5\u53ea\u8981\u662f\u5305\u542b\u5728\u503c\u5185\u4e14\u5728\u5f53\u524d\u4f4d\u7f6e\u540e\u9762\u7684\u6570\u90fd\u662f\u9006\u5e8f\u5bf9\u3002 \u8f6c\u79fb\u5c31\u53d8\u7b80\u5355\u4e86 \u8bbes\u7684\u4e8c\u8fdb\u5236\u8868\u793a\u4e2d1\u7684\u4e2a\u6570\u4e3ay\uff0c\u679a\u4e3e\u5230\u7684\u4f4d\u7f6e\uff08 s\\bigoplus s' \uff09\u4e3ax \u5219\u6709 \\begin{cases} dp[s] = \\sum_{s'} (dp[s'] + \\sum_{z>x\uff0cz\\in s'} (z - x)*(g[s]*y - t[s][z])) \\\\ t[s][i] = \\sum_{s'}(t[s][i]) & \\text{i != x} \\\\ t[s][x] = \\sum_{s'}(g[s]*y + t[s][x]) \\\\ g[s] = \\sum_{s'}g[s'] \\end{cases} \u770b\u7684\u6709\u70b9\u4e91\u91cc\u96fe\u91cc\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u628a\u6240\u6709\u5b50\u96c6\u7684\u60c5\u51b5\u90fd\u7d2f\u52a0\u5230\u4e00\u8d77\uff0ct\u6570\u7ec4\u5c31\u662f\u7528\u6765\u50a8\u5b58\u6bcf\u4f4d\u4e0a\u5b50\u96c6\u6240\u6709\u60c5\u51b5\u7684\u6570\u5b57\u548c\u3002\u7136\u540e\u6bcf\u6b21\u628a\u5b83\u540e\u9762\u7684\u548c\u52a0\u5230dp\u6570\u7ec4\u5373\u53ef \u7ef4\u62a4g\u6570\u7ec4\u662f\u4e3a\u4e86\u66f4\u65b0t\u6570\u7ec4\uff0c\u6240\u4ee5\u6574\u4e2a\u4e00\u6765\u53ef\u4ee5\u770b\u51fa\u4e00\u4e2a\u5957\u8def\uff1a \u5bf9\u4e00\u4e2a\u5e26\u987a\u5e8f\u548c\u6743\u503c\u7684\u72b6\u538bdp\uff0c\u5f80\u5f80\u9700\u8981\u7ef4\u62a4\u4e09\u4e2a\u6743\u503c\uff1a\u72b6\u6001\u7684\u53ef\u80fd\u6027\u4e2a\u6570\u3001\u72b6\u6001\u4e0a\u6bcf\u4e00\u4f4d\u7684\u6743\u503c\u548c\u3001\u72b6\u6001\u672c\u8eab\u4ee3\u8868\u7684\u586b\u5145\u65b9\u5f0f\u3002","title":"5\u3001\u72b6\u538bdp\u5176\u4ed6\u7ec6\u8282"},{"location":"badcw_blog/\u72b6\u6001\u538b\u7f29dp\u7684\u76f8\u5173\u95ee\u9898/#6dp","text":"\u4f17\u6240\u5468\u77e5\u8d39\u7528\u6d41\u548c\u72b6\u538bdp\u90fd\u662f\u7528\u6765\u89e3\u51b3\u5c0f\u8303\u56f4\u6570\u636e\u7684np\u95ee\u9898\u7684\u3002\u90a3\u4e48\u5f53\u62ff\u5230\u4e00\u4e2a\u9898\u770b\u7684\u6570\u636e\u8303\u56f420\u751a\u81f310\u4ee5\u5185\u600e\u6837\u5206\u8fa8\u4e5f\u662f\u4e00\u4e2a\u95ee\u9898\u3002 \u72b6\u538bdp\u6709\u4e2a\u5f88\u91cd\u8981\u7684\u7279\u70b9\u5c31\u662f\uff1a\u53d6\u8fd8\u662f\u4e0d\u53d6\uff0c\u80fd\u4e0d\u80fd\u53d6\u3002 \u8d39\u7528\u6d41\u6709\u4e2a\u5f88\u91cd\u8981\u7684\u7279\u70b9\uff1a\u4e00\u822c\u4e0d\u7528\u6765\u89e3\u51b3\u7ebf\u6027\u95ee\u9898\u3002 \u90a3\u4e48\u9996\u5148\u5e94\u8be5\u770b\u662f\u5426\u662f\u7ebf\u6027\u6216\u987a\u5e8f\u65e0\u5173\u7684\u95ee\u9898\uff0c\u5982\u679c\u662f\u5b9a\u662f\u72b6\u538bdp\uff0c\u5426\u5219\u770b\u662f\u5426\u7b26\u5408\u53d6\u4e0d\u53d6\u768401\u89c4\u5219\uff0c\u5982\u679c\u662f\u5b9a\u662f\u72b6\u538bdp\uff0c\u5426\u5219\u72b6\u538b\u57fa\u672c\u65e0\u6cd5\u89e3\u51b3\uff0c\u8003\u8651\u8d39\u7528\u6d41\u548c\u7206\u641c\u3002","title":"6\u3001\u5206\u8fa8\u72b6\u538bdp\u548c\u8d39\u7528\u6d41"}]}