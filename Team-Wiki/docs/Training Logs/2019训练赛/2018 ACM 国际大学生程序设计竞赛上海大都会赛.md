| Name                                                         | Date       | Solved |  A   |  B   |  C   |  D   |  E   |  F   |  G   |  H   |  I   |  J   |  K   |  L  |
| ------------------------------------------------------------ | ---------- | ------ | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | ---- |
| [2018 ACM 国际大学生程序设计竞赛上海大都会赛](https://ac.nowcoder.com/acm/contest/163) | 2019/11/20 | 6/12   |  O   |  O   |  .   |  O   |  .   |  O   |  .   |  .   |  .   |  O   |  O   |  .   |

## tag

`A.几何、随机  B.暴力 C.三维几何 D.几何、暴力  E.回文串、hash F.差分数组、暴力 G.几何 H.线段树 I.费用流 J.数位dp  K.矩阵乘法、暴力 L.卷积`

## A. [Fruit Ninja](https://ac.nowcoder.com/acm/contest/163/A)

给1e4个点，求在一条直线上的点最多多少个

意会一下概率问题，假如答案为x，那么就有x/n的概率取到那个答案上。当答案较小时，解法较多，答案较大时，取点到答案直线的概率较大。所以随机取点并`O(n)`check答案即可。



## B. [ Perfect Numbers](https://ac.nowcoder.com/acm/contest/163/B)

略



## D. [Thinking-Bear magic](https://ac.nowcoder.com/acm/contest/163/D)

给正多边形，输入边长a和边数l。操作为：把所有边的中点取出来依次连接形成新的正n边形，求多少次操作后多边形面积不超过l。

正多边形面积可以用圆周角求出
$$
\frac{n*a^2}{4 * tan(pi / n)}
$$
每次缩小相当于形状不变缩小a，所以算出a的比例即可，根据多边形内角和可以很轻易的写出来
$$
a' = a * sin^2(\frac{(n-2)*pi}{2 * n})
$$
然后由于答案不会很大直接for就可以算出结果



##  F. [Color it](https://ac.nowcoder.com/acm/contest/163/F)

给定n×m的整点方格图，Q次操作，每次将一个圆内的整点涂黑，求最后白色点的个数。
$$
1 \le n, m \le 2*10^4, 1 \le q \le 200
$$
显然暴力两种方式：枚举每个点是否在某个q中，或者枚举所有q中的点都是`O(nmq)`的复杂度

考虑一维暴力，另一维用差分数组优化即可`O(nq)`

## I. [Matrix Game](https://ac.nowcoder.com/acm/contest/163/I)

给定一个$n×m$矩阵上的数，每次可以将矩阵上的某个数+1或-1，问最少操作多少次，能使每行上的个数相等，且每列上的个数相等。

费用流。行列模型建图，原有的点行列连边，流量为`mp[i][j]`，费用为-1(强制先取)，再对该行该列连流量为inf的边，费用为1。令原有的点总和为sum，当前的花费即为sum+mcmf。

枚举流量，每次增加`n*m/__gcd(n,m)`，从源点向行分成n份，列向汇点分成m份，求出最大值。

注意这里是**有负圈**的费用流。并且在跑的时候有些玄学的常数优化……？

## J. [Beautiful Numbers](https://ac.nowcoder.com/acm/contest/163/J)

求`1～n`中的美丽数的个数，当一个数可以整除它的数位和即是美丽数。

显然数位dp，考虑到模数并不确定，实际上可以枚举所有数位和（`1e12`以内只有`1~9*12`这些数位和可能出现）。然后就是数位dp解`1～n`中有多少模x为0且数位和为x的数的个数即可。

由于模数不同，普通的使用数位dp并且每次清空复杂度过大，由于本题数据不那么大可以考虑多存一维不清空，即：
$$
dp[i][j][k][t] 表示模数、和都为i时，j位数，剩余k的和，当前余数的答案
$$


## K. [ Matrix Multiplication](https://ac.nowcoder.com/acm/contest/163/K)

略

